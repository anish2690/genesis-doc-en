<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>genesis-core | Vue Genesis</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="Vue SSR-based micro frontend, micro service, and lightweight solution">
    <link rel="preload" href="/genesis-docs-en/assets/css/0.styles.098aae58.css" as="style"><link rel="preload" href="/genesis-docs-en/assets/js/app.15092de0.js" as="script"><link rel="preload" href="/genesis-docs-en/assets/js/2.0c2f5ba2.js" as="script"><link rel="preload" href="/genesis-docs-en/assets/js/15.7e0fc8c6.js" as="script"><link rel="prefetch" href="/genesis-docs-en/assets/js/10.ba3a2383.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/11.8221a8eb.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/12.cf53d6d1.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/13.346bf1a1.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/14.2d4302c4.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/16.1d86fe56.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/17.ad3f8768.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/18.5412e4db.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/19.017d20c6.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/20.d06ea6bb.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/21.3aa60e18.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/22.35944f72.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/3.73a8364c.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/4.d2ccaca3.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/5.685a3d9d.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/6.2b6abcc3.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/7.b87aace3.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/8.3e4be250.js"><link rel="prefetch" href="/genesis-docs-en/assets/js/9.c3610892.js">
    <link rel="stylesheet" href="/genesis-docs-en/assets/css/0.styles.098aae58.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/genesis-docs-en/" class="home-link router-link-active"><!----> <span class="site-name">Vue Genesis</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/genesis-docs-en/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/genesis-docs-en/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Core library" class="dropdown-title"><span class="title">Core library</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/genesis-docs-en/core/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  genesis-core
</a></li><li class="dropdown-item"><!----> <a href="/genesis-docs-en/compiler/" class="nav-link">
  genesis-compiler
</a></li><li class="dropdown-item"><!----> <a href="/genesis-docs-en/app/" class="nav-link">
  genesis-app
</a></li><li class="dropdown-item"><!----> <a href="/genesis-docs-en/remote/" class="nav-link">
  genesis-remote
</a></li></ul></div></div><div class="nav-item"><a href="/genesis-docs-en/blog/followme5.0.html" class="nav-link">
  Official blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://anish2690.github.io/genesis-docs-en/" target="_self" rel="" class="nav-link external">
  English
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://fmfe.github.io/genesis-docs/guide/" target="_self" rel="" class="nav-link external">
  简体中文
  <!----></a></li></ul></div></div> <a href="https://github.com/fmfe/genesis" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/genesis-docs-en/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/genesis-docs-en/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Core library" class="dropdown-title"><span class="title">Core library</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/genesis-docs-en/core/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  genesis-core
</a></li><li class="dropdown-item"><!----> <a href="/genesis-docs-en/compiler/" class="nav-link">
  genesis-compiler
</a></li><li class="dropdown-item"><!----> <a href="/genesis-docs-en/app/" class="nav-link">
  genesis-app
</a></li><li class="dropdown-item"><!----> <a href="/genesis-docs-en/remote/" class="nav-link">
  genesis-remote
</a></li></ul></div></div><div class="nav-item"><a href="/genesis-docs-en/blog/followme5.0.html" class="nav-link">
  Official blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://anish2690.github.io/genesis-docs-en/" target="_self" rel="" class="nav-link external">
  English
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://fmfe.github.io/genesis-docs/guide/" target="_self" rel="" class="nav-link external">
  简体中文
  <!----></a></li></ul></div></div> <a href="https://github.com/fmfe/genesis" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>genesis-core</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/genesis-docs-en/core/#installation" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/genesis-docs-en/core/#ssr-options" class="sidebar-link">SSR Options</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#name" class="sidebar-link">name</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#isprod" class="sidebar-link">isProd</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#cdnpublicpath" class="sidebar-link">cdnPublicPath</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#build-basedir" class="sidebar-link">build.baseDir</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#build-outputdir" class="sidebar-link">build.outputDir</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#build-transpile" class="sidebar-link">build.transpile</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#build-alias" class="sidebar-link">build.alias</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#build-browsers" class="sidebar-link">build.browsers</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#build-template" class="sidebar-link">build.template</a></li></ul></li><li><a href="/genesis-docs-en/core/#ssr-attributes" class="sidebar-link">SSR Attributes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-renderer" class="sidebar-link">ssr.Renderer</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-options-2" class="sidebar-link">ssr.options</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-plugin" class="sidebar-link">ssr.plugin</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-isprod" class="sidebar-link">ssr.isProd</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-name" class="sidebar-link">ssr.name</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-publicpath" class="sidebar-link">ssr.publicPath</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-basedir" class="sidebar-link">ssr.baseDir</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-outputdir" class="sidebar-link">ssr.outputDir</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-srcdir" class="sidebar-link">ssr.srcDir</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-srcincludes" class="sidebar-link">ssr.srcIncludes</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-transpile" class="sidebar-link">ssr.transpile</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-entryclientfile" class="sidebar-link">ssr.entryClientFile</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-entryserverfile" class="sidebar-link">ssr.entryServerFile</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-outputclientmanifestfile" class="sidebar-link">ssr.outputClientManifestFile</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-outputserverbundlefile" class="sidebar-link">ssr.outputServerBundleFile</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-templatefile" class="sidebar-link">ssr.templateFile</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-outputtemplatefile" class="sidebar-link">ssr.outputTemplateFile</a></li></ul></li><li><a href="/genesis-docs-en/core/#ssr-method" class="sidebar-link">SSR method</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-getbrowsers" class="sidebar-link">ssr.getBrowsers</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#ssr-createrenderer" class="sidebar-link">ssr.createRenderer</a></li></ul></li><li><a href="/genesis-docs-en/core/#renderer-properties" class="sidebar-link">Renderer properties</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#renderer-ssr" class="sidebar-link">renderer.ssr</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#renderer-staticpublicpath" class="sidebar-link">renderer.staticPublicPath</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#renderer-staticdir" class="sidebar-link">renderer.staticDir</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#renderer-clientmanifest" class="sidebar-link">renderer.clientManifest</a></li></ul></li><li><a href="/genesis-docs-en/core/#renderer-method" class="sidebar-link">Renderer method</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#renderer-hotupdate" class="sidebar-link">renderer.hotUpdate</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#renderer-render" class="sidebar-link">renderer.render</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#renderer-renderjson" class="sidebar-link">renderer.renderJson</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#renderer-renderhtml" class="sidebar-link">renderer.renderHtml</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#renderer-rendermiddleware" class="sidebar-link">renderer.renderMiddleware</a></li></ul></li><li><a href="/genesis-docs-en/core/#renderer-example" class="sidebar-link">Renderer Example</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#generate-html" class="sidebar-link">Generate HTML</a></li></ul></li><li><a href="/genesis-docs-en/core/#plugin" class="sidebar-link">Plugin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#hook-description" class="sidebar-link">Hook description</a></li><li class="sidebar-sub-header"><a href="/genesis-docs-en/core/#externalization-dependency" class="sidebar-link">Externalization dependency</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="genesis-core"><a href="#genesis-core" class="header-anchor">#</a> genesis-core</h1> <p>Provides the functions required for the production environment to run, so it always guarantees that the dependence is minimal in the production environment. In the development environment, it needs to be used with <a href="../compiler">@fmfe/genesis-compiler</a></p> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @fmfe/genesis-core
</code></pre></div><h2 id="ssr-options"><a href="#ssr-options" class="header-anchor">#</a> SSR Options</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">SSR</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@fmfe/genesis-core'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// Options</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="name"><a href="#name" class="header-anchor">#</a> name</h3> <ul><li>Description: Application name, if your page has multiple <code>ssr</code> instances, you need to distinguish it with different nouns.</li> <li>Type: <code>string</code></li> <li>Default value: <code>ssr-genesis</code></li> <li>Examples:</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'ssr-demo'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="isprod"><a href="#isprod" class="header-anchor">#</a> isProd</h3> <ul><li>Description: Set the operating mode of the program</li> <li>Type: <code>boolean</code></li> <li>Default value: <code>process.env.NODE_ENV ==='production'</code></li> <li>Examples:</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    isProd<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="cdnpublicpath"><a href="#cdnpublicpath" class="header-anchor">#</a> cdnPublicPath</h3> <ul><li>Description: All static resources, if you want to add CDN address, just add it here, only effective in production environment</li> <li>Type: <code>string</code></li> <li>Default value: ``</li> <li>Example:</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    cdnPublicPath<span class="token operator">:</span> <span class="token string">'//cdn.xxx.com'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="build-basedir"><a href="#build-basedir" class="header-anchor">#</a> build.baseDir</h3> <ul><li>Description: The root directory of the application: on this basis, get the corresponding <code>src</code> and <code>dist</code> directories</li> <li>Type: <code>string</code></li> <li>Default value: <code>path.resolve()</code></li> <li>Example:</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    build<span class="token operator">:</span> <span class="token punctuation">{</span>
        baseDir<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="build-outputdir"><a href="#build-outputdir" class="header-anchor">#</a> build.outputDir</h3> <ul><li>Note: The application's compilation directory, you can use the path relative to the project, you can also use the absolute path</li> <li>Type: <code>string</code> path</li> <li>Default value: <code>application-root-directory/dist/</code></li> <li>Example:</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    build<span class="token operator">:</span> <span class="token punctuation">{</span>
        outputDir<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="build-transpile"><a href="#build-transpile" class="header-anchor">#</a> build.transpile</h3> <ul><li>Note: By default, <code>webpack loader</code> will ignore the packaging of the <code>node_modules</code> directory, and configure your package by configuring <code>build.transpile</code>, which is particularly useful when developing plugins</li> <li>Type: <code>string</code></li> <li>Default value: <code>[]</code></li> <li>Example:</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    build<span class="token operator">:</span> <span class="token punctuation">{</span>
        transpile<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token regex">/src/</span><span class="token punctuation">]</span>  <span class="token comment">// transpile: [/view-design/],</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="build-alias"><a href="#build-alias" class="header-anchor">#</a> build.alias</h3> <ul><li>Description: Alias ​​settings for webpack</li> <li>Types of: <code>{[x: string]: string}</code></li> <li>Defaults: <code>{}</code></li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    build<span class="token operator">:</span> <span class="token punctuation">{</span>
        alias<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">'@'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="build-browsers"><a href="#build-browsers" class="header-anchor">#</a> build.browsers</h3> <ul><li>Description: According to the version you need to compatible, to produce js and css compatible code, see details <a href="https://github.com/browserslist/browserslist" target="_blank" rel="noopener noreferrer">https://github.com/browserslist/browserslist<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Types of: <code>{ client?: string | string[]; server?: string | string[]; }</code></li> <li>Defaults:</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'ie &gt;= 9'</span><span class="token punctuation">,</span> <span class="token string">'ios &gt;= 5'</span><span class="token punctuation">,</span> <span class="token string">'android &gt;= 4.0'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    server<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">node &gt;= </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>versions<span class="token punctuation">.</span>node<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Example:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> process <span class="token keyword">from</span> <span class="token string">'process'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    build<span class="token operator">:</span> <span class="token punctuation">{</span>
        browsers<span class="token operator">:</span> <span class="token punctuation">{</span>
            client<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'ie &gt;= 9'</span><span class="token punctuation">,</span> <span class="token string">'ios &gt;= 5'</span><span class="token punctuation">,</span> <span class="token string">'android &gt;= 4.0'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            server<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">node &gt;= </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>versions<span class="token punctuation">.</span>node<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="build-template"><a href="#build-template" class="header-anchor">#</a> build.template</h3> <ul><li>Description: The address of the template rendered by SSR and CSR, it uses the <a href="https://github.com/mde/ejs" target="_blank" rel="noopener noreferrer">ejs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> template engine, if you configure the template address, it will use your template address, otherwise it will Use default template</li> <li>Type: <code>string</code></li> <li>Defaults:<code>path.resolve(this.srcDir, 'index.html')</code></li> <li>Default template:</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Vue SSR for Genesis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>&lt;%-style%&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
&lt;%-html%&gt;
&lt;%-scriptState%&gt;
&lt;%-script%&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Example:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    build<span class="token operator">:</span> <span class="token punctuation">{</span>
        template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./index.html'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ssr-attributes"><a href="#ssr-attributes" class="header-anchor">#</a> SSR Attributes</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">SSR</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@fmfe/genesis-core'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// ...Optional</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ssr.attribute</span>

</code></pre></div><h3 id="ssr-renderer"><a href="#ssr-renderer" class="header-anchor">#</a> ssr.Renderer</h3> <p>Description: An SSR renderer, please see <a href="/genesis-docs-en/core/renderer.html">Renderer</a> for details</p> <h3 id="ssr-options-2"><a href="#ssr-options-2" class="header-anchor">#</a> ssr.options</h3> <p>Description: Your incoming options
Type: <code>Genesis.Options</code></p> <h3 id="ssr-plugin"><a href="#ssr-plugin" class="header-anchor">#</a> ssr.plugin</h3> <p>Note: plug-in system, please see <a href="/genesis-docs-en/core/plugin.html">Plugin</a> for details
Type: <code>Genesis.PluginManage</code></p> <h3 id="ssr-isprod"><a href="#ssr-isprod" class="header-anchor">#</a> ssr.isProd</h3> <p>Description: Determine whether it is a production environment
Default value: <code>process.env.NODE_ENV ==='production'</code>
Type: <code>string</code></p> <h3 id="ssr-name"><a href="#ssr-name" class="header-anchor">#</a> ssr.name</h3> <p>Description: the name of the application, <a href="#name">options.name</a> can modify this value
Type: <code>string</code></p> <h3 id="ssr-publicpath"><a href="#ssr-publicpath" class="header-anchor">#</a> ssr.publicPath</h3> <p>Note: The basic path of applying static resources will affect the related configuration of webpack. <a href="#name">options.name</a> can modify this value
Type: <code>string</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    build<span class="token operator">:</span> <span class="token punctuation">{</span>
         publicPath<span class="token operator">:</span> <span class="token string">'https://storage.googleapis.com/bucket-name/'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ssr-basedir"><a href="#ssr-basedir" class="header-anchor">#</a> ssr.baseDir</h3> <p>Note: the basic directory of the application, <a href="#build-basedir">options.baseDir</a> can modify this value<br>
Default value: <code>path.resolve()</code>
Type: <code>string</code></p> <h3 id="ssr-outputdir"><a href="#ssr-outputdir" class="header-anchor">#</a> ssr.outputDir</h3> <p>Description: The application's compilation output directory, <a href="#build-outputdir">options.build.outputDir</a> can modify this value<br>
Default value: <code>compile-output-directory/application-name/</code>
Type: <code>string</code></p> <h3 id="ssr-srcdir"><a href="#ssr-srcdir" class="header-anchor">#</a> ssr.srcDir</h3> <p>Description: source code directory
Default value: <code>application-root-directory/src/</code>
Type: <code>string</code></p> <h3 id="ssr-srcincludes"><a href="#ssr-srcincludes" class="header-anchor">#</a> ssr.srcIncludes</h3> <p>Note: the includes of webpack loader will read the configuration, <a href="#build-transpile">options.build.transpile</a> can add the files or directories you need to pack<br>
Type: <code>string</code></p> <h3 id="ssr-transpile"><a href="#ssr-transpile" class="header-anchor">#</a> ssr.transpile</h3> <p>Description: Configuration of <code>options.transpile</code>
Type: <code>string</code></p> <h3 id="ssr-entryclientfile"><a href="#ssr-entryclientfile" class="header-anchor">#</a> ssr.entryClientFile</h3> <p>Description: The entry file of the client
Default value: <code>application-root-directory/src/entry-server</code>
Type: <code>string</code></p> <h3 id="ssr-entryserverfile"><a href="#ssr-entryserverfile" class="header-anchor">#</a> ssr.entryServerFile</h3> <p>Description: The entry file of the server
Default value: <code>application root directory/src/entry-server</code>
Type: <code>string</code></p> <h3 id="ssr-outputclientmanifestfile"><a href="#ssr-outputclientmanifestfile" class="header-anchor">#</a> ssr.outputClientManifestFile</h3> <p>Description: The output path of the client's mapping file<br>
Default value: <code>compile-output-directory/application-name/server/vue-ssr-client-manifest.json</code>
Type: <code>string</code></p> <h3 id="ssr-outputserverbundlefile"><a href="#ssr-outputserverbundlefile" class="header-anchor">#</a> ssr.outputServerBundleFile</h3> <p>Description: The output path of the mapping file on the server
Default value: <code>compile-output-directory/application-name/server/vue-ssr-server-bundle.json</code>
Type: <code>string</code></p> <h3 id="ssr-templatefile"><a href="#ssr-templatefile" class="header-anchor">#</a> ssr.templateFile</h3> <p>Note: The module entry address <a href="#build-template">options.build.template</a> of ssr and csr can modify this value<br>
Type: <code>string</code><br>
Default value: <code>application-root-directory/src/index.html</code></p> <h3 id="ssr-outputtemplatefile"><a href="#ssr-outputtemplatefile" class="header-anchor">#</a> ssr.outputTemplateFile</h3> <p>Description: The output address of the template file<br>
Type: <code>string</code><br>
Default value: <code>compile-output-directory/application-name/server/index.html</code></p> <h2 id="ssr-method"><a href="#ssr-method" class="header-anchor">#</a> SSR method</h2> <h3 id="ssr-getbrowsers"><a href="#ssr-getbrowsers" class="header-anchor">#</a> ssr.getBrowsers</h3> <p>Description: Get the configuration of browsers
Signature:</p> <div class="language-ts extra-class"><pre class="language-ts"><code>ssr<span class="token punctuation">.</span><span class="token function">getBrowsers</span><span class="token punctuation">(</span>env<span class="token operator">:</span> <span class="token keyword">keyof</span> Genesis<span class="token punctuation">.</span>Browsers<span class="token punctuation">)</span><span class="token operator">:</span> Genesis<span class="token punctuation">.</span>Browserslist<span class="token punctuation">;</span>
</code></pre></div><p>Example:</p> <div class="language-ts extra-class"><pre class="language-ts"><code>ssr<span class="token punctuation">.</span><span class="token function">getBrowsers</span><span class="token punctuation">(</span><span class="token string">'client'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ssr<span class="token punctuation">.</span><span class="token function">getBrowsers</span><span class="token punctuation">(</span><span class="token string">'server'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ssr-createrenderer"><a href="#ssr-createrenderer" class="header-anchor">#</a> ssr.createRenderer</h3> <p>Description: Create an SSR renderer, generally speaking, you will use it in a production environment<br>
Signature:</p> <div class="language-ts extra-class"><pre class="language-ts"><code>ssr<span class="token punctuation">.</span><span class="token function">createRenderer</span><span class="token punctuation">(</span>options<span class="token operator">?</span><span class="token operator">:</span> Genesis<span class="token punctuation">.</span>RendererOptions<span class="token punctuation">)</span><span class="token operator">:</span> Renderer<span class="token punctuation">;</span>
</code></pre></div><p>Example:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> renderer <span class="token operator">=</span> ssr<span class="token punctuation">.</span><span class="token function">createRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Static resource mounting</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    renderer<span class="token punctuation">.</span>staticPublicPath<span class="token punctuation">,</span>
    express<span class="token punctuation">.</span><span class="token keyword">static</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span>staticDir<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        immutable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        maxAge<span class="token operator">:</span> <span class="token string">'31536000000'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// SSR Rendering middleware</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span><span class="token function">renderMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="renderer-properties"><a href="#renderer-properties" class="header-anchor">#</a> Renderer properties</h2> <h3 id="renderer-ssr"><a href="#renderer-ssr" class="header-anchor">#</a> renderer.ssr</h3> <p>Description: Current SSR instance</p> <h3 id="renderer-staticpublicpath"><a href="#renderer-staticpublicpath" class="header-anchor">#</a> renderer.staticPublicPath</h3> <p>Note: The basic path of the static resource file is equivalent to <code>ssr.publicPath</code>, which will be used in the production environment</p> <h3 id="renderer-staticdir"><a href="#renderer-staticdir" class="header-anchor">#</a> renderer.staticDir</h3> <p>Note: The directory address where the static resource file is located is equivalent to <code>ssr.staticDir</code>, which will be used in the production environment</p> <h3 id="renderer-clientmanifest"><a href="#renderer-clientmanifest" class="header-anchor">#</a> renderer.clientManifest</h3> <p>Note: the file list of the client, if you need to do PWA, you can get all the resource list of the client and preload</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ClientManifest</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    all<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    initial<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">async</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    modules<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="renderer-method"><a href="#renderer-method" class="header-anchor">#</a> Renderer method</h2> <h3 id="renderer-hotupdate"><a href="#renderer-hotupdate" class="header-anchor">#</a> renderer.hotUpdate</h3> <p>Note: The hot update interface is generally only used as a hot update of the development environment
Signature:</p> <div class="language-ts extra-class"><pre class="language-ts"><code>renderer<span class="token punctuation">.</span><span class="token function">hotUpdate</span><span class="token punctuation">(</span>options<span class="token operator">?</span><span class="token operator">:</span> Genesis<span class="token punctuation">.</span>RendererOptions<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="renderer-render"><a href="#renderer-render" class="header-anchor">#</a> renderer.render</h3> <p>Note: The bottom-level rendering method, behind <code>renderer.renderJson</code>, <code>renderer.renderHtml</code>, and <code>renderer.renderMiddleware</code> are based on it for secondary packaging.<br>
Signature:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">RenderOptions</span><span class="token operator">&lt;</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Genesis<span class="token punctuation">.</span>RenderMode</span> <span class="token operator">=</span> Genesis<span class="token punctuation">.</span>RenderMode
<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    req<span class="token operator">?</span><span class="token operator">:</span> IncomingMessage<span class="token punctuation">;</span>
    res<span class="token operator">?</span><span class="token operator">:</span> ServerResponse<span class="token punctuation">;</span>
    mode<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
    url<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    id<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    automount<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    state<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
render<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Genesis<span class="token punctuation">.</span>RenderMode</span> <span class="token operator">=</span> Genesis<span class="token punctuation">.</span>RenderMode<span class="token operator">&gt;</span><span class="token punctuation">(</span>
    options<span class="token operator">?</span><span class="token operator">:</span> Genesis<span class="token punctuation">.</span>RenderOptions<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Genesis<span class="token punctuation">.</span>RenderResul<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="req"><a href="#req" class="header-anchor">#</a> req</h4> <ul><li>Description: the object of the current request body</li> <li>Type: <code>IncomingMessage</code></li> <li>Default value: <code>undefined</code></li></ul> <h4 id="res"><a href="#res" class="header-anchor">#</a> res</h4> <ul><li>Description: the object of the current response body</li> <li>Type: <code>ServerResponse</code></li> <li>Default value: <code>undefined</code></li></ul> <h4 id="mode"><a href="#mode" class="header-anchor">#</a> mode</h4> <ul><li>Description: What rendering mode to use</li> <li>Type: <code>string</code></li> <li>Default value: <code>ssr-html</code></li> <li>Optional values: <code>&quot;csr-json&quot; | &quot;ssr-json&quot; | &quot;csr-html&quot; | &quot;ssr-html&quot;</code></li></ul> <h4 id="url"><a href="#url" class="header-anchor">#</a> url</h4> <ul><li>Note: the current rendering address, you need to use it with <code>vue-router</code></li> <li>Type: <code>string</code></li> <li>Default value: <code>/</code></li></ul> <h4 id="id"><a href="#id" class="header-anchor">#</a> id</h4> <ul><li>Note: The currently rendered id is generated by <code>md5(name + url)</code> by default</li> <li>Type: <code>string</code></li> <li>Default value: <code>md5(name + url)</code></li></ul> <h4 id="name-2"><a href="#name-2" class="header-anchor">#</a> name</h4> <ul><li>Note: The name of the current application, if you need to do micro frontend, micro service, you need to define a different name</li> <li>Type: <code>string</code></li> <li>Default value: <code>ssr-genesis</code></li></ul> <h4 id="automount"><a href="#automount" class="header-anchor">#</a> automount</h4> <ul><li>Note: After the js is loaded, whether to automatically install the application. When loading remotely, you may not need to install automatically, you can set it to <code>false</code></li> <li>Type: <code>boolean</code></li> <li>Default value: <code>true</code></li></ul> <h4 id="state"><a href="#state" class="header-anchor">#</a> state</h4> <ul><li>Note: The state of the application. If you need to prefetch data on the server, you can store it here, or use it with vuex.</li> <li>Type: <code>object</code></li> <li>Default value: <code>{}</code></li></ul> <h3 id="renderer-renderjson"><a href="#renderer-renderjson" class="header-anchor">#</a> renderer.renderJson</h3> <p>Description: Render a json, you can use this API to develop the interface required by the micro front-end application
Signature:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">renderJson</span><span class="token punctuation">(</span>
    options<span class="token operator">?</span><span class="token operator">:</span> Genesis<span class="token punctuation">.</span>RenderOptions<span class="token operator">&lt;</span>Genesis<span class="token punctuation">.</span>RenderModeJson<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Genesis<span class="token punctuation">.</span>RenderResultJson<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="renderer-renderhtml"><a href="#renderer-renderhtml" class="header-anchor">#</a> renderer.renderHtml</h3> <p>Description: Render an html
Signature:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">renderHtml</span><span class="token punctuation">(</span>
    options<span class="token operator">?</span><span class="token operator">:</span> Genesis<span class="token punctuation">.</span>RenderOptions<span class="token operator">&lt;</span>Genesis<span class="token punctuation">.</span>RenderModeHtml<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Genesis<span class="token punctuation">.</span>RenderResultHtml<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="renderer-rendermiddleware"><a href="#renderer-rendermiddleware" class="header-anchor">#</a> renderer.renderMiddleware</h3> <p>Note: As long as the middleware for rendering is similar to the middleware design of <code>express</code>, it can be used directly. You can adjust the rendering to json or html by <a href="./plugin">Plugin</a><br>
Signature:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">renderMiddleware</span><span class="token punctuation">(</span>
    req<span class="token operator">:</span> IncomingMessage<span class="token punctuation">,</span>
    res<span class="token operator">:</span> ServerResponse<span class="token punctuation">,</span>
    <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token operator">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="renderer-example"><a href="#renderer-example" class="header-anchor">#</a> Renderer Example</h2> <h3 id="generate-html"><a href="#generate-html" class="header-anchor">#</a> Generate HTML</h3> <p>Description: The following gives an example of generating static html</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> IncomingMessage<span class="token punctuation">,</span> ServerResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'http'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Socket <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'net'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">SSR</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@fmfe/genesis-core'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> renderer <span class="token operator">=</span> ssr<span class="token punctuation">.</span><span class="token function">createRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token operator">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IncomingMessage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerResponse</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
    req<span class="token punctuation">.</span>url <span class="token operator">=</span> url<span class="token punctuation">;</span>
    <span class="token keyword">return</span> renderer<span class="token punctuation">.</span><span class="token function">renderHtml</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> mode<span class="token operator">:</span> <span class="token string">'ssr-html'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'/home'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Render into html, you can save it and generate a static website</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="plugin"><a href="#plugin" class="header-anchor">#</a> Plugin</h2> <h3 id="hook-description"><a href="#hook-description" class="header-anchor">#</a> Hook description</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">SSR</span><span class="token punctuation">,</span> Plugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@fmfe/genesis-core'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyPlugin</span> <span class="token keyword">extends</span> <span class="token class-name">Plugin</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * Execute before compilation
     */</span>
    <span class="token keyword">public</span> <span class="token function">beforeCompiler</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">type</span><span class="token operator">:</span> Genesis<span class="token punctuation">.</span>CompilerType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">/**
     * Modify the webpack configuration
     */</span>
    <span class="token keyword">public</span> <span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token operator">:</span> Genesis<span class="token punctuation">.</span>WebpackHookParams</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">/**
     * Modify babel's configuration
     */</span>
    <span class="token keyword">public</span> <span class="token function">babel</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token operator">:</span> Genesis<span class="token punctuation">.</span>BabelConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">/**
     * Modify postcss-loader configuration
     */</span>
    <span class="token keyword">public</span> <span class="token function">postcss</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token operator">:</span> PostcssOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">/**
     * Execute after compilation
     */</span>
    <span class="token keyword">public</span> <span class="token function">afterCompiler</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">type</span><span class="token operator">:</span> Genesis<span class="token punctuation">.</span>CompilerType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">/**
     * Execute before rendering
     */</span>
    <span class="token keyword">public</span> <span class="token function">renderBefore</span><span class="token punctuation">(</span><span class="token parameter">renderContext<span class="token operator">:</span> Genesis<span class="token punctuation">.</span>RenderContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">/**
     * Execute after rendering
     */</span>
    <span class="token keyword">public</span> <span class="token function">renderCompleted</span><span class="token punctuation">(</span><span class="token parameter">renderContext<span class="token operator">:</span> Genesis<span class="token punctuation">.</span>RenderContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSR</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ssr<span class="token punctuation">.</span>plugin<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyPlugin</span><span class="token punctuation">(</span>ssr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="externalization-dependency"><a href="#externalization-dependency" class="header-anchor">#</a> Externalization dependency</h3> <p>Note: If you are developing a large-scale application, you need to provide remote component loading, to avoid repeated loading of the same content between projects, then external dependencies are essential</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">MyPlugin</span> <span class="token keyword">extends</span> <span class="token class-name">Plugin</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * Modify the webpack configuration
     */</span>
    <span class="token keyword">public</span> <span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> config<span class="token punctuation">,</span> target <span class="token punctuation">}</span><span class="token operator">:</span> Genesis<span class="token punctuation">.</span>WebpackHookParams</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">===</span> <span class="token string">'client'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            config<span class="token punctuation">.</span><span class="token function">externals</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                vue<span class="token operator">:</span> <span class="token string">'Vue'</span><span class="token punctuation">,</span>
                <span class="token string">'vue-router'</span><span class="token operator">:</span> <span class="token string">'VueRouter'</span><span class="token punctuation">,</span>
                axios<span class="token operator">:</span> <span class="token string">'axios'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Execute before rendering
     */</span>
    <span class="token keyword">public</span> <span class="token function">renderBefore</span><span class="token punctuation">(</span><span class="token parameter">renderContext<span class="token operator">:</span> Genesis<span class="token punctuation">.</span>RenderContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        renderContext<span class="token punctuation">.</span>data<span class="token punctuation">.</span>script <span class="token operator">+=</span>
            <span class="token string">'&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@'</span> <span class="token operator">+</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version <span class="token operator">+</span> <span class="token string">'&quot; defer&gt;&lt;/script&gt;'</span> <span class="token operator">+</span>
            <span class="token string">'&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue-router@'</span> <span class="token operator">+</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'vue-router'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version <span class="token operator">+</span> <span class="token string">'&quot; defer&gt;&lt;/script&gt;'</span> <span class="token operator">+</span>
            <span class="token string">'&lt;script src=&quot;https://cdn.jsdelivr.net/npm/axios@'</span> <span class="token operator">+</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'axios'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version <span class="token operator">+</span> <span class="token string">'&quot; defer&gt;&lt;/script&gt;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/genesis-docs-en/assets/js/app.15092de0.js" defer></script><script src="/genesis-docs-en/assets/js/2.0c2f5ba2.js" defer></script><script src="/genesis-docs-en/assets/js/15.7e0fc8c6.js" defer></script>
  </body>
</html>
